# 10. バックアップ設計（Backup Policy）

本章では、体調管理システム（Django）およびご意見箱（PHP）が扱う  
データのバックアップ方針を定義する。

本システムはローカル運用を前提としているが、  
健康情報や投稿内容は長期的に分析に使われるため、  
**データ損失を避けるための最低限のバックアップを必須とする。**

---

## 10.1 バックアップ対象

### ● Django 側
- SQLite または PostgreSQL データベースファイル  
  - users テーブル  
  - employee_profiles テーブル  
  - conditions テーブル  
  - system_settings テーブル  
- （設定ファイルは Git 管理を想定するためバックアップ対象外） 

### ● PHP 側
- 意見投稿 CSV（opinion_box.csv）
- （ログ類はバックアップ対象外）  

---

## 10.2 バックアップ方針

### ● 実施頻度
- **週次バックアップ（毎週1回）**  
  ※ 初学者で無理のない負荷を優先（毎日バックアップは「拡張扱い」）

### ● 保存先
- `backups/` フォルダをプロジェクト直下に作成
- 日付付きファイル名で世代管理する  
  例：db_2025-11-19.sqlite3

---

## 10.3 バックアップ構成例

```text
backups/
├── db_2025-11-19.sqlite3
├── opinions_2025-11-19.csv
└── ...
```

---

## 10.4 実施方法

### ● Django（DB）
- Python スクリプトまたは手動コピー
- SQLite の場合はファイルそのものをコピーすればよい

### ● PHP（CSV）
- 単純なファイルコピーでよい  
- 日本語文字化け防止のため UTF-8 のまま保持

---

## 10.5 復元手順（基本）

### ● Django
- db ファイルを差し替える  
- マイグレーション整合性は不要（SQLite 前提のため）

### ● CSV
- バックアップファイルから `opinion_box.csv` を復元（上書き）すれば復元完了  

---

## 10.6 拡張（任意機能）

将来的に以下の拡張を導入可能：

### ● A. 毎日バックアップ（現行仕様には含まれない）  
- 1日1回自動バックアップを cron or Windows Task で実施

### ● B. 外部保存  
- NAS やクラウド（Google Drive / OneDrive など）へコピー  
- 退避先世代数を自動管理

---

## 10.7 バックアップ設計まとめ

- 現時点では **週次バックアップのみ実施**（学習負荷を考慮）  
- データ損失のリスクは極小化  
- 誰でも実行できる簡単な方式  
- 拡張として「毎日バックアップ」や「クラウド保存」も可能  

