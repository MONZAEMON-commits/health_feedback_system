{% extends "base.html" %}

{% block title %}管理者ダッシュボード{% endblock %}

{% block content %}
<h2>管理者ダッシュボード</h2>

{% if show_name %}
<p>表示モード：氏名あり</p>
{% else %}
<p>表示モード：匿名</p>
{% endif %}

<hr>

<h3>本日の集計</h3>
<p>
    <a href="?period=today">今日</a> |
    <a href="?period=month">今月</a>
</p>

<p>表示期間：{{ period }}</p>
<ul>
    <li>入力件数：{{ total_count }}</li>
    <li>出勤：{{ present_count }}</li>
    <li>欠勤：{{ absent_count }}</li>
</ul>

<h3>ご意見箱（タグ別件数）</h3>

{% if tag_counts %}
<ul>
    {% for tag, count in tag_counts.items %}
    <li>{{ tag }}：{{ count }} 件</li>
    {% endfor %}
</ul>
{% else %}
<p>現在、ご意見の投稿はありません。</p>
{% endif %}
<hr>
<h3>ご意見箱 集計</h3>

{% if tag_counts %}
<table border="1">
    <tr>
        <th>タグ</th>
        <th>件数</th>
    </tr>
    {% for tag, count in tag_counts.items %}
    <tr>
        <td>{{ tag }}</td>
        <td>{{ count }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>※ 現在、集計対象の投稿はありません。</p>
{% endif %}

<h3>全体平均・中央値（analysis）</h3>

<table border="1">
    <tr>
        <th>項目</th>
        <th>平均</th>
        <th>中央値</th>
    </tr>
    <tr>
        <td>肉体</td>
        <td>
            {% if avg_physical_analysis is not None %}
            {{ avg_physical_analysis|floatformat:1 }}
            {% else %}
            -
            {% endif %}
        </td>
        <td>
            {% if median_physical_analysis is not None %}
            {{ median_physical_analysis|floatformat:1 }}
            {% else %}
            -
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>精神</td>
        <td>
            {% if avg_mental_analysis is not None %}
            {{ avg_mental_analysis|floatformat:1 }}
            {% else %}
            -
            {% endif %}
        </td>
        <td>
            {% if median_mental_analysis is not None %}
            {{ median_mental_analysis|floatformat:1 }}
            {% else %}
            -
            {% endif %}
        </td>
    </tr>
</table>

<hr>

{% endblock %}